<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Diagram Visualization</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-top: 20px;
        }
        header {
            background: linear-gradient(90deg, #2c3e50 0%, #4ca1af 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        .content {
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        .diagram-container {
            height: 600px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
            background: #fafafa;
        }
        .info-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .info-row {
            display: flex;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .info-label {
            font-weight: bold;
            width: 180px;
            color: #2c3e50;
        }
        .info-value {
            flex: 1;
            color: #34495e;
        }
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border: 1px solid #ccc;
        }
        .instructions {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }
        .instructions h3 {
            margin-bottom: 10px;
            color: #1565c0;
        }
        .instructions ul {
            padding-left: 20px;
        }
        .instructions li {
            margin-bottom: 8px;
        }
        @media (max-width: 768px) {
            .info-label {
                width: 100%;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Equipment Diagram Visualization</h1>
        <div class="subtitle">GoJS diagram based on provided JSON data</div>
    </header>

    <div class="container">
        <div class="content">
            <div class="info-panel">
                <div class="info-row">
                    <div class="info-label">Drawing ID:</div>
                    <div class="info-value">98788</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Inspection Category:</div>
                    <div class="info-value">MADEIN</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Sub Equipment Drawing:</div>
                    <div class="info-value">No</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Equipment Count:</div>
                    <div class="info-value">14 elements</div>
                </div>
            </div>

            <div id="diagram" class="diagram-container"></div>

            <div class="instructions">
                <h3>Diagram Instructions</h3>
                <ul>
                    <li>Zoom in/out using the mouse wheel or pinch gesture on touch devices</li>
                    <li>Pan the diagram by clicking and dragging</li>
                    <li>Click on any element to select it</li>
                    <li>Green elements are selectable and may have associated job plans</li>
                    <li>White elements are not selectable</li>
                </ul>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #008000;"></div>
                    <span>Selectable Equipment (Green)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #ffffff;"></div>
                    <span>Non-Selectable Equipment (White)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #fafafa; border: 1px dashed #2c3e50;"></div>
                    <span>Base Layout</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        function init() {
            const $ = go.GraphObject.make;

            const diagram = $(go.Diagram, "diagram", {
                initialAutoScale: go.Diagram.Uniform,
                allowZoom: true,
                allowHorizontalScroll: true,
                allowVerticalScroll: true,
                "undoManager.isEnabled": true
            });

            // Define node templates for different categories
            diagram.nodeTemplateMap.add("layout",
                $(go.Node, "Spot",
                    $(go.Shape,
                        {
                            fill: "transparent",
                            stroke: "#2c3e50",
                            strokeWidth: 2
                        },
                        new go.Binding("geometry", "geo"),
                        new go.Binding("stroke", "isSelected", s => s ? "#ff6b00" : "#2c3e50").ofObject()
                    ),
                    $(go.TextBlock,
                        {
                            alignment: go.Spot.TopCenter,
                            margin: 5,
                            font: "bold 14px sans-serif",
                            stroke: "#2c3e50"
                        },
                        new go.Binding("text", "name")
                    )
                )
            );

            diagram.nodeTemplateMap.add("svd",
                $(go.Node, "Spot",
                    {
                        selectionAdorned: true,
                        // Bind the selectable property
                        selectable: new go.Binding("selectable", "Selectable", s => s === "true")
                    },
                    $(go.Shape,
                        {
                            fill: "#008000",
                            stroke: "#000000",
                            strokeWidth: 1
                        },
                        new go.Binding("geometry", "eq_geometry"),
                        new go.Binding("fill", "color"),
                        new go.Binding("stroke", "stroke"),
                        new go.Binding("angle", "angle", a => a === "undefined" ? 0 : Number(a))
                    ),
                    $(go.TextBlock,
                        {
                            alignment: go.Spot.Center,
                            font: "12px sans-serif",
                            stroke: "white",
                            margin: 5
                        },
                        new go.Binding("text", "equipmentId", id => `ID: ${id}`)
                    )
                )
            );

            // Set the model with the provided data
            diagram.model = new go.GraphLinksModel(
                [
                    {
                        "key": "9365972_Base_2",
                        "name": "Base Layout",
                        "category": "layout",
                        "location": "234 77",
                        "geo": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 97.90999999999994 L0 68.44999999999996 M0 68.44999999999996 L0 28.129999999999967 M0 28.129999999999967 L3.87 13.399999999999977 M3.87 13.399999999999977 L12.92 3.9799999999999898 M12.92 3.9799999999999898 L23.18 0 M23.18 0 L34.77 0 M34.77 0 L603.4 0 M603.4 0 L622.72 0 M622.72 0 L636.96 0 M636.96 0 L648.5500000000001 1.3300000000000125 M648.5500000000001 1.3300000000000125 L657.61 2.660000000000025 M657.61 2.660000000000025 L666.54 3.980000000000018 M666.54 3.980000000000018 L674.27 5.310000000000031 M674.27 5.310000000000031 L684.65 8.090000000000032 M684.65 8.090000000000032 L694.91 10.740000000000038 M694.91 10.740000000000038 L710.36 14.730000000000047 M710.36 14.730000000000047 L722.07 18.710000000000036 M722.07 18.710000000000036 L733.6600000000001 24.150000000000034 M733.6600000000001 24.150000000000034 L746.46 29.460000000000036 M746.46 29.460000000000036 L759.38 38.87000000000003 M759.38 38.87000000000003 L770.97 48.29000000000002 M770.97 48.29000000000002 L778.7 56.380000000000024 M778.7 56.380000000000024 L783.8900000000001 64.35000000000005 M783.8900000000001 64.35000000000005 L789.0800000000002 73.76000000000008 M789.0800000000002 73.76000000000008 L794.2700000000002 85.84000000000006 M794.2700000000002 85.84000000000006 L795.4800000000002 97.91000000000005 M795.4800000000002 97.91000000000005 L794.2700000000002 109.98000000000005 M794.2700000000002 109.98000000000005 L789.0800000000002 122.06000000000003 M789.0800000000002 122.06000000000003 L783.8900000000001 131.47000000000006 M783.8900000000001 131.47000000000006 L778.7 139.44000000000008 M778.7 139.44000000000008 L770.97 147.53000000000006 M770.97 147.53000000000006 L759.38 156.95000000000007 M759.38 156.95000000000007 L746.46 166.3600000000001 M746.46 166.3600000000001 L733.6600000000001 171.6700000000001 M733.6600000000001 171.6700000000001 L722.07 177.1100000000001 M722.07 177.1100000000001 L710.36 181.09000000000012 M710.36 181.09000000000012 L694.91 185.08000000000013 M694.91 185.08000000000013 L684.65 187.7300000000001 M684.65 187.7300000000001 L674.27 190.51000000000008 M674.27 190.51000000000008 L666.54 191.84000000000006 M666.54 191.84000000000006 L657.61 193.16000000000005 M657.61 193.16000000000005 L648.5500000000001 194.49000000000004 M648.5500000000001 194.49000000000004 L636.96 195.82000000000002 M636.96 195.82000000000002 L622.72 195.82000000000002 M622.72 195.82000000000002 L603.4 195.82000000000002 M603.4 195.82000000000002 L34.77 195.82000000000002 M34.77 195.82000000000002 L23.18 195.82000000000002 M23.18 195.82000000000002 L12.920000000000002 191.84 M12.920000000000002 191.84 L3.870000000000001 182.42 M3.870000000000001 182.42 L8.881784197001252e-16 167.68999999999997 M8.881784197001252e-16 167.68999999999997 L8.881784197001252e-16 127.36999999999998 M8.881784197001252e-16 127.36999999999998 L8.881784197001252e-16 97.90999999999994"
                        },
                        "RefParams": ""
                    },
                    {
                        "key": "9365972_Bay_3",
                        "equipmentId": "876543",
                        "EquipmentCode": "707.2",
                        "Selectable": "false",
                        "JobPlans": "",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L179 0 L179 50 L91.39626250000083 29.74557500000003 L0 50 L0 0"
                        },
                        "loc": "881.3537375000003 78.9544250000001",
                        "size": "220 20",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_BAY_4",
                        "equipmentId": "876542",
                        "EquipmentCode": "707.2",
                        "Selectable": "false",
                        "JobPlans": "",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L179 0 L179 50 L91.39626250000083 29.74557500000003 L0 50 L0 0"
                        },
                        "loc": "881.3537375000003 354.9544250000001",
                        "size": "220 20",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_BAY_5",
                        "equipmentId": "876541",
                        "EquipmentCode": "707.2",
                        "Selectable": "false",
                        "JobPlans": "",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L179 0 L179 50 L91.39626250000083 29.74557500000003 L0 50 L0 0"
                        },
                        "loc": "1010.3537375000003 97.95442500000013",
                        "angle": 90,
                        "size": "260 20",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_BAY_1",
                        "equipmentId": "876540",
                        "EquipmentCode": "707.2",
                        "Selectable": "false",
                        "JobPlans": "",
                        "name": "",
                        "color": "#ffffff",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "1010.7106036997263 98.27029124049247",
                        "angle": "undefined",
                        "size": "90 260",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_BAY_2",
                        "equipmentId": "876539",
                        "EquipmentCode": "707.2",
                        "Selectable": "false",
                        "JobPlans": "",
                        "name": "",
                        "color": "#ffffff",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "900.7106036997263 98.27029124049247",
                        "angle": "undefined",
                        "size": "90 260",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_1",
                        "equipmentId": "876538",
                        "EquipmentCode": "707.2",
                        "JobPlans":"[{\"jobplanid\":\"32100\",\"child_drawing\":\"98789\",\"formcode\":\"\"},{\"jobplanid\":\"76676\",\"child_drawing\":\"\",\"formcode\":\"CLEAN\"}]",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "1009.6468185484775 98.55005204055132",
                        "size": "90 60",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_2",
                        "equipmentId": "876537",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "1009.6468185484775 158.79566677123208",
                        "size": "90 70",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_3",
                        "equipmentId": "876536",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "1009.7326265772829 227.29899431752844",
                        "size": "90 70",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_4",
                        "equipmentId": "876535",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "1009.8186354611837 297.08452934006937",
                        "size": "90 60",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_8",
                        "equipmentId": "876534",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "900.8186354611837 297.08452934006937",
                        "size": "90 60",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_7",
                        "equipmentId": "876541",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "900.7326265772829 227.29899431752844",
                        "size": "90 70",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_6",
                        "equipmentId": "876541",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "900.6468185484775 158.79566677123208",
                        "size": "90 70",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_HC_5",
                        "equipmentId": "876541",
                        "EquipmentCode": "707.2",
                        "JobPlans":"",
                        "Selectable": "true",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L80 0 L80 80 L0 80 L0 0"
                        },
                        "loc": "900.6468185484775 98.55005204055132",
                        "size": "90 60",
                        "IsAnimation": ""
                    },
                    {
                        "key": "9365972_BAY_6",
                        "equipmentId": "876541",
                        "EquipmentCode": "707.2",
                        "JobPlans": "",
                        "Selectable": "false",
                        "name": "",
                        "color": "#008000",
                        "stroke": "#000000",
                        "category": "svd",
                        "eq_geometry": {
                            "class": "go.Geometry",
                            "type": "Path",
                            "path": "F M0 0 L179 0 L179 50 L91.39626250000083 29.74557500000003 L0 50 L0 0"
                        },
                        "loc": "900.3537375000003 97.95442500000013",
                        "angle": 90,
                        "size": "260 20",
                        "IsAnimation": ""
                    }
                ],
                []
            );

            // Set the diagram position and scale to show all elements
            diagram.initialContentAlignment = go.Spot.Center;
            diagram.initialDocumentSpot = go.Spot.Center;
            diagram.initialViewportSpot = go.Spot.Center;
        }

        // Initialize the diagram when the page loads
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>