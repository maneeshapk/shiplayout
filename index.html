<!DOCTYPE html>
<html>
<head>
  <script src="https://unpkg.com/gojs/release/go.js"></script>
</head>
<body>
  <div id="myDiagramDiv" style="width:100%; height:600px; border:1px solid black"></div>
  <script>
    var $ = go.GraphObject.make;

    var myDiagram = $(go.Diagram, "myDiagramDiv", {
      "undoManager.isEnabled": true,
      layout: $(go.GridLayout, { spacing: new go.Size(40, 40) })
    });

    myDiagram.nodeTemplate =
      $(go.Node, "Auto",
        {
          click: function(e, node) {
            var data = node.data;
            if (window.BayChannel) {
              window.BayChannel.postMessage(JSON.stringify(data));
            }
          }
        },
        $(go.Shape, "RoundedRectangle",
          { fill: "white", stroke: "teal", strokeWidth: 2, width: 120, height: 60 }),
        $(go.Panel, "Table",
          { margin: 5 },
          $(go.TextBlock, { row: 0, column: 0, font: "bold 14px sans-serif", margin: 2 },
            new go.Binding("text", "bay")),
          $(go.Shape, "Circle", { row: 0, column: 1, width: 18, height: 18, margin: 2 },
            new go.Binding("fill", "status"))
        )
      );

    myDiagram.model = new go.GraphLinksModel([
      { key: 1, bay: "Bay 1", status: "red" },
      { key: 2, bay: "Bay 2", status: "orange" },
      { key: 3, bay: "Bay 3", status: "green" }
    ]);
  </script>
</body>
</html>
